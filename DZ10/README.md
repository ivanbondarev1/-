# **Лабораторная работа."Настройка протокола OSPFv2 для одной области"**
## **Топология** 
![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/Топология.png?raw=true)

## **Цели:**
+ ### Часть 1. Создание сети и настройка основных параметров устройства.
+ ### Часть 2. Настройка и проверка базовой работы протокола  OSPFv2 для одной области.
+ ### Часть 3. Оптимизация и проверка конфигурации OSPFv2 для одной области.


## **Решение**
## **Часть 1. Создание сети и настройка основных параметров устройства**

### **Шаг 1. Создайте сеть.**
### **Шаг 2. Произведите базовую настройку маршрутизаторов.**

### R1:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/R1(стандарт).png?raw=true)

### R2:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/R2(стандарт).png?raw=true)


### **Шаг 3. Настройте базовые параметры каждого коммутатора.**

### S1:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/S1(стандарт).png?raw=true)


### S2:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/S2(стандарт).png?raw=true)


## **Часть 2. Настройка и проверка базовой работы протокола OSPFv2 для одной области**


### **Шаг 1. Настройте адреса интерфейса и базового OSPFv2 на каждом маршрутизаторе.**


a.	Настройте адреса интерфейсов на каждом маршрутизаторе, как показано в таблице адресации выше.

b.	Перейдите в режим конфигурации маршрутизатора OSPF, используя идентификатор процесса 56.

c.	Настройте статический идентификатор маршрутизатора для каждого маршрутизатора (1.1.1.1 для R1, 2.2.2.2 для R2).

d.	Настройте инструкцию сети для сети между R1 и R2, поместив ее в область 0.

### R1:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/Ospf(R1).png?raw=true)

### R2:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/Ospf(R2).png?raw=true)


e.	Только на R2 добавьте конфигурацию, необходимую для объявления сети Loopback 1 в область OSPF 0.

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/lo1.png?raw=true)


f.	Убедитесь, что OSPFv2 работает между маршрутизаторами. Выполните команду, чтобы убедиться, что R1 и R2 сформировали смежность.

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/Nei.png?raw=true)


### ***Вопрос***:

Какой маршрутизатор является DR? Какой маршрутизатор является BDR? Каковы критерии отбора?

R2 являтеся DR R1 BDR. В данном случае DR и BDR выбраны исходя из наибольшего Router ID


g.	На R1 выполните команду show ip route ospf, чтобы убедиться, что сеть R2 Loopback1 присутствует в таблице маршрутизации. Обратите внимание, что поведение OSPF по умолчанию заключается в объявлении интерфейса обратной связи в качестве маршрута узла с использованием 32-битной маски.

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/sh_ospf.png?raw=true)

h.	Запустите Ping до  адреса интерфейса R2 Loopback 1 из R1. Выполнение команды ping должно быть успешным.

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/ping.png?raw=true)



## **Часть 3. Оптимизация и проверка конфигурации OSPFv2 для одной области**

### **Шаг 1. Реализация различных оптимизаций на каждом маршрутизаторе.**


a.	На R1 настройте приоритет OSPF интерфейса G0/0/1 на 50, чтобы убедиться, что R1 является назначенным маршрутизатором.

b.	Настройте таймеры OSPF на G0/0/1 каждого маршрутизатора для таймера приветствия, составляющего 30 секунд.

c.	На R1 настройте статический маршрут по умолчанию, который использует интерфейс Loopback 1 в качестве интерфейса выхода. Затем распространите маршрут по умолчанию в OSPF. Обратите внимание на сообщение консоли после установки маршрута по умолчанию.

### R1:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/helloR1.png?raw=true)

*ip ospf dead 120

### R2:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/helloR2.png?raw=true)

*ip ospf dead 120

d.	добавьте конфигурацию, необходимую для OSPF для обработки R2 Loopback 1 как сети точка-точка. Это приводит к тому, что OSPF объявляет Loopback 1 использует маску подсети интерфейса.


e.	Только на R2 добавьте конфигурацию, необходимую для предотвращения отправки объявлений OSPF в сеть Loopback 1.


f.	Измените базовую пропускную способность для маршрутизаторов. После этой настройки перезапустите OSPF с помощью команды clear ip ospf process . Обратите внимание на сообщение консоли после установки новой опорной полосы пропускания.

### R2:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/PPP_R2.png?raw=true)

### R1:

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/BAND_R1.png?raw=true)


### **Шаг 2. Убедитесь, что оптимизация OSPFv2 реализовалась.**

a.	Выполните команду show ip ospf interface g0/0/1 на R1 и убедитесь, что приоритет интерфейса установлен равным 50, а временные интервалы — Hello 30, Dead 120, а тип сети по умолчанию — Broadcast

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/sh_intR1.png?raw=true)

b.	На R1 выполните команду show ip route ospf, чтобы убедиться, что сеть R2 Loopback1 присутствует в таблице маршрутизации. Обратите внимание на разницу в метрике между этим выходным и предыдущим выходным. Также обратите внимание, что маска теперь составляет 24 бита, в отличие от 32 битов, ранее объявленных.

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/sh_routeR1.png?raw=true)

c.	Введите команду show ip route ospf на маршрутизаторе R2. Единственная информация о маршруте OSPF должна быть распространяемый по умолчанию маршрут R1.

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/def_R1.png?raw=true)

d.	Запустите Ping до адреса интерфейса R1 Loopback 1 из R2. Выполнение команды ping должно быть успешным.

![](https://github.com/ivanbondarev1/Otus/blob/main/DZ10/PINGR2.png?raw=true)

### ***Вопрос***:

Почему стоимость OSPF для маршрута по умолчанию отличается от стоимости OSPF в R1 для сети 192.168.1.0/24?

Потому это будет первое место куда роутер будет слать пакеты в случае если OSPF неизвестен маршрут до получателя

























































